<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up Form</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <form method="post" id="studentForm" class="form-container">
        <fieldset>
            <label for="studentID">Student ID: </label>
            <input type="text" placeholder="Enter Student ID" id="studentID" required><br>
            <label for="fullName">Full Name: </label>
            <input type="text" placeholder="Enter Full Name" id="fullName" required><br>
            <label for="birthday">Birthday: </label>
            <input type="date" placeholder="Enter Birthday" id="birthday" required><br>
            <label for="email">Email: </label>
            <input type="email" placeholder="you@example.com" id="email" required><br>
            <label for="mobilePhone">Mobile Phone: </label>
            <input type="text" placeholder="Mobile Phone" id="mobilePhone" required>
        </fieldset>

        <fieldset>
            <label for="gradeLevel">Grade Level:</label>
            <select id="gradeLevel" name="gradeLevel" required>
                <option value="">Grade Level</option>
                <option value="6">6th Grade</option>
                <option value="7">7th Grade</option>
                <option value="8">8th Grade</option>
                <option value="9">9th Grade</option>
                <option value="10">10th Grade</option>
                <option value="11">11th Grade</option>
                <option value="12">12th Grade</option>
            </select><br>

            <label for="radio">Residence type:</label>
            <input type="radio" id="intern" name="residence" value="intern" required>
            <label for="intern">Intern</label>
            <input type="radio" id="extern" name="residence" value="extern" required>
            <label for="extern">Extern</label><br>

            <label for="organization">Organization:</label>
            <select id="organization" name="organization" required>
                <option value="">Select Organization</option>
                <option value="math">Math</option>
                <option value="english">English</option>
                <option value="physics">Physics</option>
                <option value="chemistry">Chemistry</option>
                <option value="biology">Biology</option>
            </select><br>

            <label for="whyJoin">Why do you want to join?</label><br>
            <textarea id="whyJoin" name="whyJoin" rows="4" cols="50" placeholder="Explain why you want to join..." required></textarea>
        </fieldset>

        <button type="submit">Submit</button>
        <button type="reset">Reset</button>
        <button onclick="window.location.href='viewSignUps.html'">View Signups</button>
    </form>
</body>

<script>
    const form = document.getElementById('studentForm');
    const reset = document.querySelector('button[type="reset"]');

    function getStudentFormData(){
        const data = localStorage.getItem('studentFormData');
        return data ? JSON.parse(data) : [];
    }

    function writeStudentFormData(){
        const currentData = getStudentFormData();
        let incomingData = {
            studentID: form.studentID.value,
            fullName: form.fullName.value,
            birthday: form.birthday.value,
            email: form.email.value,
            mobilePhone: form.mobilePhone.value,
            gradeLevel: form.gradeLevel.value,
            residence: form.querySelector('input[name="residence"]:checked').value == "intern" ? "Intern" : "Extern",
            organization: form.organization.value,
            whyJoin: form.whyJoin.value
        }

        currentData.push(incomingData);
        localStorage.setItem('studentFormData', JSON.stringify(currentData));
    }

    form.addEventListener('submit', function(event){
        event.preventDefault();
        let submit = confirm("Are you sure you want to submit the form?");

        if(submit){
            alert("Form submitted successfully!");
            writeStudentFormData();
            form.reset();
        } else {
            alert("Form submission cancelled.");
        }
    }); 

    reset.addEventListener('click', function(event){
        let resetConfirm = confirm("Are you sure you want to reset the form?");
        
        if(resetConfirm){
            form.reset();
        } else {
            event.preventDefault();
        }
    });

    const formInputs = form.querySelectorAll('input, select, textarea');
    formInputs.forEach(function(input){
        input.addEventListener('blur', function(){
            if(!input.checkValidity()){
                input.classList.add("blur");
            } else {
                input.classList.remove("blur");
            }
        });
    });
</script>
</html>
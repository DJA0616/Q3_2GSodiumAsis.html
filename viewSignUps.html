<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Ups List</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <label for="organization">Select Your Organization:</label>
    <select id="organization" name="organization" required>
        <option value="none">None</option>
        <option value="math">Math</option>
        <option value="english">English</option>
        <option value="physics">Physics</option>
        <option value="chemistry">Chemistry</option>
        <option value="biology">Biology</option>
    </select><br>

    <table></table>

    <button onclick="window.location.href='formSignUp.html'">Back To Form</button>
</body>
<script>
    const organizationSelect = document.getElementById('organization');

    function getStudentFormData(){
        const data = localStorage.getItem('studentFormData');
        return data ? JSON.parse(data) : [];
    }

    function clearTable(){
        const table = document.querySelector('table');
        table.innerHTML = '';
    }

    function populateTable(organizationFilter = 'none'){
        clearTable();
        const table = document.querySelector('table');
        const data = getStudentFormData();

        // Create table headers
        const headerRow = document.createElement('tr');
        const headers = ['Student ID', 'Full Name', 'Birthday', 'Email', 'Mobile Phone', 'Grade Level', 'Residence Type', 'Organization', 'Why Join'];
        headers.forEach(headerText => {
            const th = document.createElement('th');
            th.textContent = headerText;
            headerRow.appendChild(th);
        });
        table.appendChild(headerRow);

        let hasVisibleEntries = false;

        // Populate table rows
        data.forEach(entry => {
            // Skip entries that don't match the filter
            if (organizationFilter !== 'none' && entry.organization.toLowerCase() !== organizationFilter) {
                return;
            }

            // If filter passed, mark that we have visible entries
            hasVisibleEntries = true;
            
            // Create a new row and populate it with entry data
            const row = document.createElement('tr');
            Object.values(entry).forEach(text => {
                const td = document.createElement('td');
                td.textContent = text;
                row.appendChild(td);
            });
            table.appendChild(row);
        });

        // If no entries are visible, show a message
        if (!hasVisibleEntries) {
            const noDataRow = document.createElement('tr');
            const noDataCell = document.createElement('td');
            noDataCell.colSpan = headers.length;
            noDataCell.textContent = 'No sign-ups available for the selected organization.';
            noDataRow.appendChild(noDataCell);
            table.appendChild(noDataRow);
        }
    }

    populateTable();

    // Rerenders table on organization change
    organizationSelect.addEventListener('change', function() {
        populateTable(this.value);
    });
</script>
</html>